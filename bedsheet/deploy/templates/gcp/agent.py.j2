"""
{{ agent.name }} - ADK Agent
Generated by: bedsheet deploy --target gcp
{% if agent.description %}
{{ agent.description }}
{% endif %}
"""
from google.adk.agents import LlmAgent{% if orchestration != "single" %}, {{ orchestration.title() }}Agent{% endif %}

{% if gcp.builtin_tools %}
# ADK Built-in tools
from google.adk.tools import {{ gcp.builtin_tools | join(', ') }}
{% endif %}

{% if agent.tools %}
# Tool definitions (converted from Bedsheet @action decorators)
{% for tool in agent.tools %}

def {{ tool.name }}({% for param in tool.parameters %}{{ param.name }}: {{ param.type_hint }}{% if not loop.last %}, {% endif %}{% endfor %}) -> str:
    """{{ tool.description }}"""
    # TODO: Implement tool logic
    # Original Bedsheet action: {{ tool.name }}
    raise NotImplementedError("Implement {{ tool.name }} tool logic")

{% endfor %}
{% endif %}

# Agent definition
{% if orchestration == "single" %}
root_agent = LlmAgent(
    name="{{ agent.name }}",
    model="{{ gcp.model or 'gemini-2.5-flash' }}",
    instruction="""{{ agent.instruction | replace('"""', '\\"\\"\\"') }}""",
    {% if agent.tools or gcp.builtin_tools %}
    tools=[
        {%- for tool in agent.tools %}{{ tool.name }}, {% endfor %}
        {%- for builtin in gcp.builtin_tools %}{{ builtin }}, {% endfor %}
    ],
    {% endif %}
)
{% else %}
# Collaborator agents
{% for collab in agent.collaborators %}
{{ collab.name | replace('-', '_') }}_agent = LlmAgent(
    name="{{ collab.name }}",
    model="{{ gcp.model or 'gemini-2.5-flash' }}",
    instruction="""{{ collab.instruction | replace('"""', '\\"\\"\\"') }}""",
    {% if collab.tools or gcp.builtin_tools %}
    tools=[
        {%- for tool in collab.tools %}{{ tool.name }}, {% endfor %}
        {%- for builtin in gcp.builtin_tools %}{{ builtin }}, {% endfor %}
    ],
    {% endif %}
)

{% endfor %}

# Orchestrator ({{ orchestration }})
root_agent = {{ orchestration.title() }}Agent(
    name="{{ agent.name }}",
    sub_agents=[{% for collab in agent.collaborators %}{{ collab.name | replace('-', '_') }}_agent{% if not loop.last %}, {% endif %}{% endfor %}],
)
{% endif %}
