# {{ config.name }} - Cloud Run Container
# Generated by: bedsheet generate --target gcp

FROM python:3.11-slim

# Install uv
COPY --from=ghcr.io/astral-sh/uv:latest /uv /usr/local/bin/uv

WORKDIR /app

# Install dependencies from pyproject.toml (not as installable package)
COPY pyproject.toml .
RUN uv pip install --system --prerelease allow -r pyproject.toml

# Copy agent code
COPY agent/ ./agent/

# Cloud Run expects PORT env var
ENV PORT=8080

# ADK serves the agent
CMD ["python", "-m", "google.adk.cli", "api_server", "--agent_module", "agent.agent"]
